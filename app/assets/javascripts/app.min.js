!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("crossroads");d.addRoute("/",function(){var b=a("./viewmodel/boards/index.js"),c=new b;c.listBoard(),c.listUser(),ko.applyBindings(c)}),d.addRoute("/boards/{id}",function(b){var c=a("./viewmodel/boards/show.js"),d=new c;d.listGroup(b),ko.applyBindings(d)}),d.bypassed.add(function(a){console.log(a)}),d.parse(window.location.pathname+window.location.search+window.location.hash)},{"./viewmodel/boards/index.js":8,"./viewmodel/boards/show.js":9,crossroads:10}],2:[function(a,b,c){var d=function(){this.apiUrl={collection:null,member:null}};d.prototype.search=function(a){var b=$.Deferred();return $.ajax({url:this.apiUrl[a||"member"]}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b.promise()},d.prototype.create=function(a,b){var c=$.Deferred();return $.ajax({url:this.apiUrl[b||"member"],method:"POST",contentType:"application/json",data:a}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},d.prototype.validation=function(a,b){var c=$.Deferred();return $.ajax({url:this.apiUrl[b||"member"]+"/dryrun",method:"POST",contentType:"application/json",data:a}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},d.prototype.find=function(a){var b=$.Deferred();return $.ajax({url:this.apiUrl.member+"/"+a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b.promise()},d.prototype.edit=function(a,b){var c=$.Deferred();return $.ajax({url:this.apiUrl.member+"/"+a,method:"PATCH",contentType:"application/json",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},d.prototype["delete"]=function(a){var b=$.Deferred();return $.ajax({url:this.apiUrl.member+"/"+a,method:"DELETE"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b.promise()},b.exports=d},{}],3:[function(a,b,c){var d=a("./basemodel.js"),e=function(a,b,c){this.id=ko.observable(a),this.subject=ko.observable(b),this.priority=ko.observable(c),this.groups=ko.observableArray(),this.members=ko.observableArray(),this.members_attributes=ko.observableArray(),this.apiUrl={collection:null,member:"/api/v1/boards"},this.invalidMessages={subject:[]}};e.prototype=d.prototype,b.exports=e},{"./basemodel.js":2}],4:[function(a,b,c){var d=a("./basemodel.js"),e=function(a,b,c,d){this.id=ko.observable(a),this.board_id=ko.observable(b),this.subject=ko.observable(c),this.priority=ko.observable(d),this.tasks=ko.observableArray(),this.apiUrl={collection:"/api/v1/boards/"+b+"/groups",member:"/api/v1/groups"},this.invalidMessages={subject:[]}};e.prototype=d.prototype,b.exports=e},{"./basemodel.js":2}],5:[function(a,b,c){var d=a("./basemodel.js"),e=function(a,b,c,d,e){this.id=ko.observable(a),this.group_id=ko.observable(b),this.subject=ko.observable(c),this.body=ko.observable(d),this.priority=ko.observable(e),this.members=ko.observableArray(),this.members_attributes=ko.observableArray(),this.apiUrl={collection:"/api/v1/groups/"+b+"/tasks",member:"/api/v1/tasks"},this.invalidMessages={subject:[],body:[]}};e.prototype=d.prototype,b.exports=e},{"./basemodel.js":2}],6:[function(a,b,c){var d=a("./basemodel.js"),e=function(a,b,c){this.id=ko.observable(a),this.nickname=ko.observable(b),this.avatar_url=ko.observable(c),this.apiUrl={collection:null,member:"/api/v1/users"}};e.prototype=d.prototype,e.prototype.login=function(){var a=$.Deferred();return $.ajax({url:this.apiUrl.member+"/current"}).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a.promise()},b.exports=e},{"./basemodel.js":2}],7:[function(a,b,c){var d=a("../model/user.js"),e=function(){var a=this;a.alertSuccessMessage=ko.observable(),a.alertErrorMessage=ko.observable(),a.invalidMessages=ko.observable(),a.backUrl=location.pathname;var b=new WebSocketRails(window.location.host+"/websocket");a.channel=b.subscribe("update_notification"),a.user=new d(null,null,null),a.users=ko.observableArray(),a.user.login().done(function(b){a.user.id(b.id),a.user.nickname(b.nickname),a.user.avatar_url(b.avatar_url)}).fail(function(a){console.log(a)}),a.closeAlertSuccess=function(){a.alertSuccessMessage(null)}.bind(a),a.closeErrorSuccess=function(){a.alertErrorMessage(null)}.bind(a),a.loadingFlg=ko.observable(!1)};b.exports=e},{"../model/user.js":6}],8:[function(a,b,c){var d=a("../baseviewmodel.js"),e=a("../../model/board.js"),f=a("../../model/user.js"),g=function(){var a=this;a.board=new e(null,null,null),a.boards=ko.observableArray(),a.selectedBoard,a.baseViewModel=new d,a.baseViewModel.invalidMessages({board:a.board.invalidMessages}),a.selectedUsers=ko.observableArray(),a.suggestedUsers=ko.observableArray(),a.member=ko.observable(),a.boardValidation=ko.computed(function(){a.board.validation(ko.toJSON({board:a.board})).done(function(b){a.baseViewModel.invalidMessages({board:a.board.invalidMessages})}).fail(function(b){422==b.status&&a.baseViewModel.invalidMessages({board:b.responseJSON})})}),a.suggestUser=ko.computed(function(){var b=new RegExp(a.member());a.suggestedUsers([]);for(k in a.baseViewModel.users())b.test(a.baseViewModel.users()[k].nickname())&&a.suggestedUsers.push(new f(a.baseViewModel.users()[k].id(),a.baseViewModel.users()[k].nickname(),a.baseViewModel.users()[k].avatar_url()));0==a.suggestedUsers().length&&a.suggestedUsers(a.baseViewModel.users())}),a.baseViewModel.channel.bind("Board",function(b){a.boards(JSON.parse(b).map(function(a){return new e(a.id,a.subject,a.priority)}))}),a.listBoard=function(){a.baseViewModel.loadingFlg(!0),a.board.search().done(function(b){a.baseViewModel.loadingFlg(!1),a.boards(b.map(function(a){return new e(a.id,a.subject,a.priority)}))}).fail(function(b){a.baseViewModel.loadingFlg(!1)})}.bind(a),a.listUser=function(){a.baseViewModel.loadingFlg(!0),a.baseViewModel.user.search().done(function(b){a.baseViewModel.loadingFlg(!1),a.baseViewModel.users(b.map(function(a){return new f(a.id,a.nickname,a.avatar_url)})),a.suggestedUsers(a.baseViewModel.users())}).fail(function(b){a.baseViewModel.loadingFlg(!1)})}.bind(a),a.toggleUser=function(b){var c=a.selectedUsers.indexOf(b.id());-1==c?a.selectedUsers.push(b.id()):a.selectedUsers.splice(c,1)}.bind(a),a.openBoardModal=function(){a.board.id(null),a.board.subject(null),a.board.priority(null),a.selectedUsers([]),a.member(null),$("#boardModal").modal("show")}.bind(a),a.findBoard=function(b){a.selectedBoard=b,a.board.id(b.id()),a.board.subject(b.subject()),a.board.priority(b.priority()),a.board.members(b.members()),a.selectedUsers(b.members().map(function(a){return a.id})),a.member(null),$("#boardModal").modal("show")}.bind(a),a.createBoard=function(){$("#boardModal").modal("hide"),a.baseViewModel.loadingFlg(!0),a.board.members_attributes(a.selectedUsers().map(function(a){return{user_id:a}})),a.board.create(ko.toJSON({board:a.board})).done(function(b){a.baseViewModel.loadingFlg(!1),a.baseViewModel.alertSuccessMessage("success")}).fail(function(b){a.baseViewModel.loadingFlg(!1),401==b.status?$("#loginModal").modal("show"):a.baseViewModel.alertErrorMessage("error")})}.bind(a),a.editBoard=function(){$("#boardModal").modal("hide"),a.baseViewModel.loadingFlg(!0),a.board.members_attributes(a.selectedUsers().map(function(a){return{user_id:a}})),a.board.members().forEach(function(b){-1==a.selectedUsers().indexOf(b.id)&&a.board.members_attributes.push({user_id:b.id,release:1})}),a.board.edit(a.board.id(),ko.toJSON({board:a.board})).done(function(b){a.baseViewModel.loadingFlg(!1),a.selectedBoard.subject(b.subject),a.selectedBoard.priority(b.priority),a.baseViewModel.alertSuccessMessage("success")}).fail(function(b){a.baseViewModel.loadingFlg(!1),401==b.status?$("#loginModal").modal("show"):a.baseViewModel.alertErrorMessage("error")})}.bind(a),a.deleteBoard=function(){$("#boardModal").modal("hide"),a.baseViewModel.loadingFlg(!0),a.board["delete"](a.selectedBoard.id()).done(function(b){a.baseViewModel.loadingFlg(!1),a.boards.remove(a.selectedBoard),a.baseViewModel.alertSuccessMessage("success")}).fail(function(b){a.baseViewModel.loadingFlg(!1),401==b.status?$("#loginModal").modal("show"):a.baseViewModel.alertErrorMessage("error")})}.bind(a),a.moveBoard=function(b){a.selectedBoard=b.item,a.board.id(b.item.id()),a.board.subject(b.item.subject()),a.board.priority(b.targetIndex+1),a.baseViewModel.loadingFlg(!0),a.board.edit(a.board.id(),ko.toJSON({board:a.board})).done(function(b){a.baseViewModel.loadingFlg(!1),a.selectedBoard.priority(b.priority)}).fail(function(b){a.baseViewModel.loadingFlg(!1),401==b.status&&$("#loginModal").modal("show")})}.bind(a)};b.exports=g},{"../../model/board.js":3,"../../model/user.js":6,"../baseviewmodel.js":7}],9:[function(a,b,c){var d=a("../baseviewmodel.js"),e=a("../../model/task.js"),f=a("../../model/group.js"),g=a("../../model/board.js"),h=a("../../model/user.js"),i=function(){var a=this;a.task=new e(null,null,null,null,null),a.selectedTask,a.group=new f(null,null,null,null),a.selectedGroup,a.board=new g(null,null,null),a.baseViewModel=new d,a.baseViewModel.invalidMessages({group:a.group.invalidMessages,task:a.task.invalidMessages}),a.selectedUsers=ko.observableArray(),a.suggestedUsers=ko.observableArray(),a.member=ko.observable(),a.groupValidation=ko.computed(function(){if(null==a.group.board_id())return!1;var b=new f(null,a.group.board_id(),a.group.subject(),a.group.priority());b.validation(ko.toJSON({group:b}),"collection").done(function(b){a.baseViewModel.invalidMessages({group:a.group.invalidMessages,task:a.task.invalidMessages})}).fail(function(b){422==b.status&&a.baseViewModel.invalidMessages({group:b.responseJSON,task:a.task.invalidMessages})})}),a.taskValidation=ko.computed(function(){if(null==a.task.group_id())return!1;var b=new e(null,a.task.group_id(),a.task.subject(),a.task.body(),a.task.priority());b.validation(ko.toJSON({task:b}),"collection").done(function(b){a.baseViewModel.invalidMessages({group:a.group.invalidMessages,task:a.task.invalidMessages})}).fail(function(b){422==b.status&&a.baseViewModel.invalidMessages({group:a.group.invalidMessages,task:$.extend({},a.task.invalidMessages,b.responseJSON)})})}),a.suggestUser=ko.computed(function(){var b=new RegExp(a.member());a.suggestedUsers([]);for(k in a.board.members())b.test(a.board.members()[k].nickname())&&a.suggestedUsers.push(new h(a.board.members()[k].id(),a.board.members()[k].nickname(),a.board.members()[k].avatar_url()));0==a.suggestedUsers().length&&a.suggestedUsers(a.board.members())}),a.updateItems=function(b){return a.board.id()!=b.id?!1:(a.board.subject(b.subject),a.board.priority(b.priority),a.board.groups(b.groups.map(function(a){var c=new f(a.id,b.id,a.subject,a.priority);return c.tasks(a.tasks.map(function(b){var c=new e(b.id,a.id,b.subject,b.body,b.priority);return c.members(b.members.map(function(a){return new h(a.id,a.nickname,a.avatar_url)})),c})),c.tasks.group_id=a.id,c})),void a.board.members(b.members.map(function(a){return new h(a.id,a.nickname,a.avatar_url)})))},a.baseViewModel.channel.bind("Group",function(b){a.updateItems(JSON.parse(b))}),a.baseViewModel.channel.bind("Task",function(b){a.updateItems(JSON.parse(b))}),a.listGroup=function(b){a.baseViewModel.loadingFlg(!0),a.board.find(b).done(function(b){a.baseViewModel.loadingFlg(!1),a.board.id(b.id),a.updateItems(b)}).fail(function(b){a.baseViewModel.loadingFlg(!1)})}.bind(a),a.toggleUser=function(b){var c=a.selectedUsers.indexOf(b.id());-1==c?a.selectedUsers.push(b.id()):a.selectedUsers.splice(c,1)}.bind(a),a.openTaskModal=function(b){a.selectedGroup=b,a.task.id(null),a.task.subject(null),a.task.body(null),a.task.group_id(b.id()),a.task.priority(null),a.selectedUsers([]),a.member(null),$("#taskModal").modal("show")}.bind(a),a.openGroupModal=function(){a.group.id(null),a.group.board_id(a.board.id()),a.group.subject(null),a.group.priority(null),$("#groupModal").modal("show")}.bind(a),a.findTask=function(b,c){a.selectedTask=c,a.selectedGroup=b,a.task.id(c.id()),a.task.subject(c.subject()),a.task.body(c.body()),a.task.group_id(c.group_id()),a.task.priority(c.priority()),a.task.members(c.members()),a.selectedUsers(c.members().map(function(a){return a.id})),a.member(null),$("#taskModal").modal("show")}.bind(a),a.findGroup=function(b){a.selectedGroup=b,a.group.id(b.id()),a.group.board_id(b.board_id()),a.group.subject(b.subject()),a.group.priority(b.priority()),$("#groupModal").modal("show")}.bind(a),a.createTask=function(){$("#taskModal").modal("hide"),a.baseViewModel.loadingFlg(!0);var b=new e(null,a.task.group_id(),a.task.subject(),a.task.body(),a.task.priority());a.task.members_attributes(a.selectedUsers().map(function(a){return{user_id:a}})),b.create(ko.toJSON({task:a.task}),"collection").done(function(b){a.baseViewModel.loadingFlg(!1),a.baseViewModel.alertSuccessMessage("success")}).fail(function(b){a.baseViewModel.loadingFlg(!1),401==b.status?$("#loginModal").modal("show"):a.baseViewModel.alertErrorMessage("error")})}.bind(a),a.createGroup=function(){$("#groupModal").modal("hide"),a.baseViewModel.loadingFlg(!0);var b=new f(null,a.group.board_id(),a.group.subject(),a.group.priority());b.create(ko.toJSON({group:b}),"collection").done(function(b){a.baseViewModel.loadingFlg(!1),a.baseViewModel.alertSuccessMessage("success")}).fail(function(b){a.baseViewModel.loadingFlg(!1),401==b.status?$("#loginModal").modal("show"):a.baseViewModel.alertErrorMessage("error")})}.bind(a),a.editTask=function(){$("#taskModal").modal("hide"),a.baseViewModel.loadingFlg(!0),a.task.members_attributes(a.selectedUsers().map(function(a){return{user_id:a}})),a.task.members().forEach(function(b){-1==a.selectedUsers().indexOf(b.id)&&a.task.members_attributes.push({user_id:b.id,release:1})}),a.task.edit(a.task.id(),ko.toJSON({task:a.task})).done(function(b){a.baseViewModel.loadingFlg(!1),a.selectedTask.subject(b.subject),a.selectedTask.body(b.body),a.baseViewModel.alertSuccessMessage("success")}).fail(function(b){a.baseViewModel.loadingFlg(!1),401==b.status?$("#loginModal").modal("show"):a.baseViewModel.alertErrorMessage("error")})}.bind(a),a.editGroup=function(){$("#groupModal").modal("hide"),a.baseViewModel.loadingFlg(!0),a.group.edit(a.group.id(),ko.toJSON({group:a.group})).done(function(b){a.baseViewModel.loadingFlg(!1),a.selectedGroup.subject(b.subject),a.baseViewModel.alertSuccessMessage("success")}).fail(function(b){a.baseViewModel.loadingFlg(!1),401==b.status?$("#loginModal").modal("show"):a.baseViewModel.alertErrorMessage("error")})}.bind(a),a.deleteTask=function(){$("#taskModal").modal("hide"),a.baseViewModel.loadingFlg(!0),a.task["delete"](a.selectedTask.id()).done(function(b){a.baseViewModel.loadingFlg(!1),a.selectedGroup.tasks.remove(a.selectedTask),a.baseViewModel.alertSuccessMessage("success")}).fail(function(b){a.baseViewModel.loadingFlg(!1),401==b.status?$("#loginModal").modal("show"):a.baseViewModel.alertErrorMessage("error")})}.bind(a),a.deleteGroup=function(){$("#groupModal").modal("hide"),a.baseViewModel.loadingFlg(!0),a.group["delete"](a.selectedGroup.id()).done(function(b){a.baseViewModel.loadingFlg(!1),a.board.groups.remove(a.selectedGroup),a.baseViewModel.alertSuccessMessage("success")}).fail(function(b){a.baseViewModel.loadingFlg(!1),401==b.status?$("#loginModal").modal("show"):a.baseViewModel.alertErrorMessage("error")})}.bind(a),a.moveTask=function(b){a.selectedTask=b.item,a.task.id(b.item.id()),a.task.group_id(b.targetParent.group_id),a.task.subject(b.item.subject()),a.task.body(b.item.body()),a.task.priority(b.targetIndex+1),a.baseViewModel.loadingFlg(!0),a.task.edit(a.task.id(),ko.toJSON({task:a.task})).done(function(b){a.baseViewModel.loadingFlg(!1),a.selectedTask.group_id(b.group.id),a.selectedTask.priority(b.priority)}).fail(function(b){a.baseViewModel.loadingFlg(!1),401==b.status?$("#loginModal").modal("show"):a.baseViewModel.alertErrorMessage("error")})}.bind(a),a.moveGroup=function(b){a.selectedGroup=b.item,a.group.id(b.item.id()),a.group.board_id(b.item.board_id()),a.group.subject(b.item.subject()),a.group.priority(b.targetIndex+1),a.baseViewModel.loadingFlg(!0),a.group.edit(a.group.id(),ko.toJSON({group:a.group})).done(function(b){a.baseViewModel.loadingFlg(!1),a.selectedGroup.priority(b.priority)}).fail(function(b){a.baseViewModel.loadingFlg(!1),401==b.status?$("#loginModal").modal("show"):a.baseViewModel.alertErrorMessage("error")})}.bind(a)};b.exports=i},{"../../model/board.js":3,"../../model/group.js":4,"../../model/task.js":5,"../../model/user.js":6,"../baseviewmodel.js":7}],10:[function(a,b,c){!function(){var c=function(a){function b(a,b){if(a.indexOf)return a.indexOf(b);for(var c=a.length;c--;)if(a[c]===b)return c;return-1}function c(a,c){var d=b(a,c);-1!==d&&a.splice(d,1)}function d(a,b){return"[object "+b+"]"===Object.prototype.toString.call(a)}function e(a){return d(a,"RegExp")}function f(a){return d(a,"Array")}function g(a){return"function"==typeof a}function h(a){var b;return b=null===a||"null"===a?null:"true"===a?!0:"false"===a?!1:a===o||"undefined"===a?o:""===a||isNaN(a)?a:parseFloat(a)}function i(a){for(var b=a.length,c=[];b--;)c[b]=h(a[b]);return c}function j(a,b){for(var c,d,e,g,i=(a||"").replace("?","").split("&"),j=-1,k={};d=i[++j];)c=d.indexOf("="),g=d.substring(0,c),e=decodeURIComponent(d.substring(c+1)),b!==!1&&(e=h(e)),g in k?f(k[g])?k[g].push(e):k[g]=[k[g],e]:k[g]=e;return k}function k(){this.bypassed=new a.Signal,this.routed=new a.Signal,this._routes=[],this._prevRoutes=[],this._piped=[],this.resetState()}function l(b,c,d,f){var g=e(b),h=f.patternLexer;this._router=f,this._pattern=b,this._paramsIds=g?null:h.getParamIds(b),this._optionalParamsIds=g?null:h.getOptionalParamsIds(b),this._matchRegexp=g?b:h.compilePattern(b,f.ignoreCase),this.matched=new a.Signal,this.switched=new a.Signal,c&&this.matched.add(c),this._priority=d||0}var m,n,o;return n=""===/t(.+)?/.exec("t")[1],k.prototype={greedy:!1,greedyEnabled:!0,ignoreCase:!0,ignoreState:!1,shouldTypecast:!1,normalizeFn:null,resetState:function(){this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null},create:function(){return new k},addRoute:function(a,b,c){var d=new l(a,b,c,this);return this._sortedInsert(d),d},removeRoute:function(a){c(this._routes,a),a._destroy()},removeAllRoutes:function(){for(var a=this.getNumRoutes();a--;)this._routes[a]._destroy();this._routes.length=0},parse:function(a,b){if(a=a||"",b=b||[],this.ignoreState||a!==this._prevMatchedRequest&&a!==this._prevBypassedRequest){var c,d=this._getMatchedRoutes(a),e=0,f=d.length;if(f)for(this._prevMatchedRequest=a,this._notifyPrevRoutes(d,a),this._prevRoutes=d;f>e;)c=d[e],c.route.matched.dispatch.apply(c.route.matched,b.concat(c.params)),c.isFirst=!e,this.routed.dispatch.apply(this.routed,b.concat([a,c])),e+=1;else this._prevBypassedRequest=a,this.bypassed.dispatch.apply(this.bypassed,b.concat([a]));this._pipeParse(a,b)}},_notifyPrevRoutes:function(a,b){for(var c,d=0;c=this._prevRoutes[d++];)c.route.switched&&this._didSwitch(c.route,a)&&c.route.switched.dispatch(b)},_didSwitch:function(a,b){for(var c,d=0;c=b[d++];)if(c.route===a)return!1;return!0},_pipeParse:function(a,b){for(var c,d=0;c=this._piped[d++];)c.parse(a,b)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(a){var b=this._routes,c=b.length;do--c;while(b[c]&&a._priority<=b[c]._priority);b.splice(c+1,0,a)},_getMatchedRoutes:function(a){for(var b,c=[],d=this._routes,e=d.length;(b=d[--e])&&((!c.length||this.greedy||b.greedy)&&b.match(a)&&c.push({route:b,params:b._getParamsArray(a)}),this.greedyEnabled||!c.length););return c},pipe:function(a){this._piped.push(a)},unpipe:function(a){c(this._piped,a)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},m=new k,m.VERSION="0.12.2",m.NORM_AS_ARRAY=function(a,b){return[b.vals_]},m.NORM_AS_OBJECT=function(a,b){return[b]},l.prototype={greedy:!1,rules:void 0,match:function(a){return a=a||"",this._matchRegexp.test(a)&&this._validateParams(a)},_validateParams:function(a){var b,c=this.rules,d=this._getParamsObject(a);for(b in c)if("normalize_"!==b&&c.hasOwnProperty(b)&&!this._isValidParam(a,b,d))return!1;return!0},_isValidParam:function(a,c,d){var h=this.rules[c],i=d[c],j=!1,k=0===c.indexOf("?");return null==i&&this._optionalParamsIds&&-1!==b(this._optionalParamsIds,c)?j=!0:e(h)?(k&&(i=d[c+"_"]),j=h.test(i)):f(h)?(k&&(i=d[c+"_"]),j=this._isValidArrayRule(h,i)):g(h)&&(j=h(i,a,d)),j},_isValidArrayRule:function(a,c){if(!this._router.ignoreCase)return-1!==b(a,c);"string"==typeof c&&(c=c.toLowerCase());for(var d,e,f=a.length;f--;)if(d=a[f],e="string"==typeof d?d.toLowerCase():d,e===c)return!0;return!1},_getParamsObject:function(a){for(var c,d,e=this._router.shouldTypecast,f=this._router.patternLexer.getParamValues(a,this._matchRegexp,e),g={},i=f.length;i--;)d=f[i],this._paramsIds&&(c=this._paramsIds[i],0===c.indexOf("?")&&d&&(g[c+"_"]=d,d=j(d,e),f[i]=d),n&&""===d&&-1!==b(this._optionalParamsIds,c)&&(d=void 0,f[i]=d),g[c]=d),g[i]=d;return g.request_=e?h(a):a,g.vals_=f,g},_getParamsArray:function(a){var b,c=this.rules?this.rules.normalize_:null;return c=c||this._router.normalizeFn,b=c&&g(c)?c(a,this._getParamsObject(a)):this._getParamsObject(a).vals_},interpolate:function(a){var b=this._router.patternLexer.interpolate(this._pattern,a);if(!this._validateParams(b))throw new Error("Generated string doesn't validate against `Route.rules`.");return b},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.switched.dispose(),this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},k.prototype.patternLexer=function(){function a(){var a,b;for(a in o)o.hasOwnProperty(a)&&(b=o[a],b.id="__CR_"+a+"__",b.save="save"in b?b.save.replace("{{id}}",b.id):b.id,b.rRestore=new RegExp(b.id,"g"))}function b(a,b){var c,d=[];for(a.lastIndex=0;c=a.exec(b);)d.push(c[1]);return d}function c(a){return b(n,a)}function d(a){return b(o.OP.rgx,a)}function e(a,b){return a=a||"",a&&(s===p?a=a.replace(l,""):s===r&&(a=a.replace(m,"")),a=g(a,"rgx","save"),a=a.replace(k,"\\$&"),a=g(a,"rRestore","res"),s===p&&(a="\\/?"+a)),s!==q&&(a+="\\/?"),new RegExp("^"+a+"$",b?"i":"")}function g(a,b,c){var d,e;for(e in o)o.hasOwnProperty(e)&&(d=o[e],a=a.replace(d[b],d[c]));return a}function h(a,b,c){var d=b.exec(a);return d&&(d.shift(),c&&(d=i(d))),d}function j(a,b){if(b=b||{},"string"!=typeof a)throw new Error("Route pattern should be a string.");var c=function(a,c){var d;if(c="?"===c.substr(0,1)?c.substr(1):c,null!=b[c]){if("object"==typeof b[c]){var e,g=[];for(var h in b[c])if(e=b[c][h],f(e))for(var i in e)"[]"==h.slice(-2)?g.push(encodeURI(h.slice(0,-2))+"[]="+encodeURI(e[i])):g.push(encodeURI(h+"="+e[i]));else g.push(encodeURI(h+"="+e));d="?"+g.join("&")}else d=String(b[c]);if(-1===a.indexOf("*")&&-1!==d.indexOf("/"))throw new Error('Invalid value "'+d+'" for segment "'+a+'".')}else{if(-1!==a.indexOf("{"))throw new Error("The segment "+a+" is required.");d=""}return d};return o.OS.trail||(o.OS.trail=new RegExp("(?:"+o.OS.id+")+$")),a.replace(o.OS.rgx,o.OS.save).replace(n,c).replace(o.OS.trail,"").replace(o.OS.rRestore,"/")}var k=/[\\.+*?\^$\[\](){}\/'#]/g,l=/^\/|\/$/g,m=/\/$/g,n=/(?:\{|:)([^}:]+)(?:\}|:)/g,o={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},p=1,q=2,r=3,s=p;return a(),{strict:function(){s=q},loose:function(){s=p},legacy:function(){s=r},getParamIds:c,getOptionalParamsIds:d,getParamValues:h,compilePattern:e,interpolate:j}}(),m};"function"==typeof define&&define.amd?define(["signals"],c):"undefined"!=typeof b&&b.exports?b.exports=c(a("signals")):window.crossroads=c(window.signals)}()},{signals:11}],11:[function(a,b,c){!function(a){function c(a,b,c,d,e){this._listener=b,this._isOnce=c,this.context=d,this._signal=a,this._priority=e||0}function d(a,b){if("function"!=typeof a)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b))}function e(){this._bindings=[],this._prevParams=null;var a=this;this.dispatch=function(){e.prototype.dispatch.apply(a,arguments)}}c.prototype={active:!0,params:null,execute:function(a){var b,c;return this.active&&this._listener&&(c=this.params?this.params.concat(a):a,b=this._listener.apply(this.context,c),this._isOnce&&this.detach()),b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},e.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,b,d,e){var f,g=this._indexOfListener(a,d);if(-1!==g){if(f=this._bindings[g],f.isOnce()!==b)throw new Error("You cannot add"+(b?"":"Once")+"() then add"+(b?"Once":"")+"() the same listener without removing the relationship first.")}else f=new c(this,a,b,d,e),this._addBinding(f);return this.memorize&&this._prevParams&&f.execute(this._prevParams),f},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c,d=this._bindings.length;d--;)if(c=this._bindings[d],c._listener===a&&c.context===b)return d;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:function(a,b,c){return d(a,"add"),this._registerListener(a,!1,b,c)},addOnce:function(a,b,c){return d(a,"addOnce"),this._registerListener(a,!0,b,c)},remove:function(a,b){d(a,"remove");var c=this._indexOfListener(a,b);return-1!==c&&(this._bindings[c]._destroy(),this._bindings.splice(c,1)),a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var b,c=Array.prototype.slice.call(arguments),d=this._bindings.length;if(this.memorize&&(this._prevParams=c),d){b=this._bindings.slice(),this._shouldPropagate=!0;do d--;while(b[d]&&this._shouldPropagate&&b[d].execute(c)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var f=e;f.Signal=e,"function"==typeof define&&define.amd?define(function(){return f}):"undefined"!=typeof b&&b.exports?b.exports=f:a.signals=f}(this)},{}]},{},[1]);
//# sourceMappingURL=app.min.js.map