!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./viewmodel.js"),e=new d;e.listGroup(),ko.applyBindings(e)},{"./viewmodel.js":5}],2:[function(a,b,c){var d=a("./model.js"),e=function(a,b){this.id=ko.observable(a),this.subject=ko.observable(b),this.tasks=ko.observableArray(),this.apiUrl="/api/v1/groups"};e.prototype=d.prototype,b.exports=e},{"./model.js":3}],3:[function(a,b,c){var d=function(){this.apiUrl};d.prototype.search=function(){var a=$.Deferred();return $.ajax({url:this.apiUrl}).done(function(b){a.resolve(b)}).fail(function(b){a.reject(b)}),a.promise()},d.prototype.create=function(a){var b=$.Deferred();return $.ajax({url:this.apiUrl,method:"POST",contentType:"application/json",data:a}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b.promise()},d.prototype.edit=function(a,b){var c=$.Deferred();return $.ajax({url:this.apiUrl+"/"+a,method:"PATCH",contentType:"application/json",data:b}).done(function(a){c.resolve(a)}).fail(function(a){c.reject(a)}),c.promise()},d.prototype["delete"]=function(a){var b=$.Deferred();return $.ajax({url:this.apiUrl+"/"+a,method:"DELETE"}).done(function(a){b.resolve(a)}).fail(function(a){b.reject(a)}),b.promise()},b.exports=d},{}],4:[function(a,b,c){var d=a("./model.js"),e=function(a,b,c,d){this.id=ko.observable(a),this.subject=ko.observable(b),this.body=ko.observable(c),this.group_id=ko.observable(d),this.apiUrl="/api/v1/tasks"};e.prototype=d.prototype,b.exports=e},{"./model.js":3}],5:[function(a,b,c){var d=a("./task.js"),e=a("./group.js"),f=function(){var a=this;a.task=new d(null,null,null,null),a.selectedTask,a.group=new e(null,null),a.groups=ko.observableArray(),a.selectedGroup,a.alertSuccessMessage=ko.observable(),a.alertErrorMessage=ko.observable(),a.listGroup=function(){a.group.search().done(function(b){a.groups(b.map(function(a){var b=new e(a.id,a.subject);return b.tasks(a.tasks.map(function(a){return new d(a.id,a.subject,a.body,a.group_id)})),b}))}).fail(function(a){console.log(a)})}.bind(a),a.openTaskModal=function(b){a.selectedGroup=b,a.task.id(null),a.task.subject(null),a.task.body(null),a.task.group_id(b.id()),$("#taskModal").modal("show")}.bind(a),a.findTask=function(b,c){a.selectedTask=c,a.selectedGroup=b,a.task.id(c.id()),a.task.subject(c.subject()),a.task.body(c.body()),a.task.group_id(c.group_id()),$("#taskModal").modal("show")}.bind(a),a.createTask=function(){a.task.create(ko.toJSON({task:a.task})).done(function(b){console.log(b),a.selectedGroup.tasks.push(new d(b.id,b.subject,b.body,b.group_id)),$("#taskModal").modal("hide"),a.alertSuccessMessage("success")}).fail(function(b){console.log(b),a.alertErrorMessage("error")})}.bind(a),a.editTask=function(){a.task.edit(a.task.id(),ko.toJSON({task:a.task})).done(function(b){console.log(b),a.selectedTask.subject(b.subject),a.selectedTask.body(b.body),a.selectedTask.group_id(b.group.id),$("#taskModal").modal("hide"),a.alertSuccessMessage("success")}).fail(function(b){console.log(b),a.alertErrorMessage("error")})}.bind(a),a.deleteTask=function(){a.task["delete"](a.selectedTask.id()).done(function(b){console.log(b),a.selectedGroup.tasks.remove(a.selectedTask),$("#taskModal").modal("hide"),a.alertSuccessMessage("success")}).fail(function(b){console.log(b),a.alertErrorMessage("error")})}.bind(a)};b.exports=f},{"./group.js":2,"./task.js":4}]},{},[1]);
//# sourceMappingURL=app.map